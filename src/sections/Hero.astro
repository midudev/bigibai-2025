---
import SubscribeForm from "@/newsletter/components/SubscribeForm.astro";
---

<main
  class="max-w-4xl mx-auto flex items-center justify-center px-4 py-20 flex-col gap-4"
>
<!-- choco Ibai - si cambias el modelo de ibai2.glb a ibai3.glb el modelo camina-->
  <div class="w-full flex items-center justify-center">
  <model-viewer
    src="/models/ibai2.glb"
    autoplay
    camera-orbit="0deg 90deg"
    disable-zoom
    camera-controls
    camera-orbit="0deg 90deg 1.2m"
    field-of-view="90deg"
    class=" w-[250px] h-[250px] top-0 rounded-full"
    style="transform: translateY(-30px)"
  ></model-viewer>
</div>
  <p
    class="text-xl text-white/80 text-center text-balance mb-10 fade-in-up"
    style="animation-delay: 0.2s;"
    aria-live="off"
  >
    ¿Listos para celebrar las Navidades juntos de nuevo? Descubre la nueva
    edición de Big Ibai y mucho más próximamente.
  </p>
  <h2
    class="text-5xl font-normal text-white text-center fade-in-up"
    style="animation-delay: 0.4s;"
    role="contentinfo"
    aria-label="¿Quieres que te avisemos?"
  >
    ¿Quieres que te avisemos?
  </h2>
  <!--<p class="text-xl text-white/80 text-center text-balance mb-10"  aria-live="off">Unete a los mas de <span class="text-brand font-bold text-3xl newsletter-count"><span id="newsletter-count"></span> reals</span> que ya están suscritos.</p>-->
  <SubscribeForm />
</main>

<script>
  import { actions } from "astro:actions";

  const count = document.getElementById("newsletter-count");

  const updateNewsletterCount = async () => {
    const currentCount: any = await actions.getNewsletterCount();
    if (count) {
      count.textContent = currentCount.data.count.toLocaleString() || "1000";
    }
  };

  updateNewsletterCount();
</script>

<style>
  @keyframes fadeInUp {
    from {
      opacity: 0;
      transform: translateY(30px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  @keyframes textGlow {
    0%,
    100% {
      text-shadow:
        0 0 20px rgba(248, 177, 52, 0.3),
        0 0 40px rgba(248, 177, 52, 0.2);
    }
    50% {
      text-shadow:
        0 0 30px rgba(248, 177, 52, 0.5),
        0 0 60px rgba(248, 177, 52, 0.3);
    }
  }

  .fade-in-up {
    animation: fadeInUp 0.8s ease-out backwards;
  }

  .glow-text {
    animation:
      fadeInUp 0.8s ease-out backwards,
      textGlow 3s ease-in-out infinite;
  }
</style>
